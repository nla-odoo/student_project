<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="assets_frontend" inherit_id="web.assets_frontend" name="Demo Assets">
        <xpath expr="//link[last()]" position="inside">
            <link href="/fleet_tracking/static/src/scss/cart_css.scss" rel="stylesheet" type="text/scss"/>
            <link href="/fleet_tracking/static/src/scss/portal.scss" rel="stylesheet" type="text/scss"/>
        </xpath>
        <xpath expr="//link[last()]" position="inside">
            <!-- <link href="/fleet_tracking/static/src/scss/cart_css.scss" rel="stylesheet" type="text/scss"/> -->
            <link href="/fleet_tracking/static/src/scss/app.js" type="text/javascript"/>
        </xpath>
    </template>
    <template id="fleet_portal_menu">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <button aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" class="navbar-toggler" data-target="#navbarNav" data-toggle="collapse" type="button">
                <span class="navbar-toggler-icon"/>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <t t-if="request.env.user.has_group('fleet_tracking.group_driver')">
                        <li class="nav-item active">
                            <a class="nav-link" href="/my/">Home 
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/odometer/">Odometer</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/map/">Map</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/trip_address/">Trip Address</a>
                        </li>
                    </t>
                    <t t-if="request.env.user.has_group('fleet_tracking.group_customer')">
                        <li class="nav-item active">
                            <a class="nav-link" href="/product_list/">Home 
                                <span class="sr-only">(current)</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/contract/">Contract</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/cart">Cart</a>
                        </li>
                    </t>
                </ul>
            </div>
        </nav>
    </template>
    <template id="home_page">
        <t t-call="portal.frontend_layout">
            <div class="oe_structure"/>
            <div class="oe_structure">
                <div class="container">
                    <t t-call="fleet_tracking.fleet_portal_menu"/>
                    <t t-if="request.env.user.has_group('fleet_tracking.group_driver')">
                        <table class="table">
                            <thead class="thead-dark">
                                <tr>
                                    <th scope="col">Vehicle</th>
                                    <th scope="col">Driver</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Reading</th>
                                    <th scope="col">Unit</th>
                                </tr>
                            </thead>
                            <t t-as="odometer" t-foreach="odometer_ids">
                                <tr>
                                    <td>
                                        <t t-esc="odometer.vehicle_id.model_id.brand_id.name"/>-
                                        <t t-esc="odometer.vehicle_id.model_id.name"/>
                                        /
                                        <t t-esc="odometer.vehicle_id.license_plate"/>
                                        /
                                        <t t-esc="odometer.vehicle_id.color"/>
                                    </td>
                                    <td>
                                        <t t-esc="odometer.driver_id.name"/>,
                                        <t t-esc="odometer.driver_id.driving_licence_nunmber"/>
                                    </td>
                                    <td>
                                        <t t-esc="odometer.date"/>
                                    </td>
                                    <td>
                                        <t t-esc="odometer.odometer_reading"/>
                                    </td>
                                    <td>
                                        <t t-esc="odometer.reading_unit"/>
                                    </td>
                                </tr>
                            </t>
                        </table>
                    </t>
                </div>
            </div>
        </t>
    </template>
    <template id="odometer">
        <t t-call="portal.frontend_layout">
            <div class="container">
                <t t-call="fleet_tracking.fleet_portal_menu"/>
                <form action="/save/odometer/" method="post">
                    <div class="col-lg-8 form_cente">
                        <div class="form-group">
                            <label class="form-control-label" for="lgFormGroupInput" id="titelLabel">Vehicle</label>
                            <select class="form-control" name="vehicle" required="1">
                                <option value="">Select Vehicle</option>
                                <t t-as="vehicle" t-foreach="vehicle_ids">
                                    <option t-att-value="vehicle.id">
                                        <t t-esc="vehicle.model_id.brand_id.name"/>-
                                        <t t-esc="vehicle.model_id.name"/>
                                        /
                                        <t t-esc="vehicle.license_plate"/>
                                        /
                                        <t t-esc="vehicle.color"/>
                                    </option>
                                </t>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Date</label>
                            <input class="form-control" name="date" required="1" type="date"/>
                        </div>
                        <div class="row">
                            <div class="col-xl-6">
                                <label for="exampleInputEmail1">Odometer Reading</label>
                                <input class="form-control" name="reading" required="1" type="number"/>
                            </div>
                            <div class="col-xl-6">
                                <label class="form-control-label" for="lgFormGroupInput" id="titelLabel">Unit</label>
                                <select class="form-control" name="unit">
                                    <option>Km</option>
                                    <option>Mile</option>
                                </select>
                            </div>
                            <div class="col-xl-6">
                                <button class="btn btn-primary" style="margin-top: 5%;" type="submit">Submit</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </t>
    </template>
    <template id="contract_booking">
        <t t-call="portal.frontend_layout">
        <t t-call="fleet_tracking.fleet_portal_menu"/>
            <div class="container">
                <form action="/contract/" method="post">
                    <div class="col-lg-8 form_cente">
                        <t t-if="vehicle_ids != None">
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="disabledTextInput" style="align=left">Start Date</label>
                                    <input class="form-control" name="start_date" t-att-value="start_date" type="text"/>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="inputPassword4">End Date</label>
                                    <input class="form-control" name="end_date" t-att-value="end_date" type="text"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-control-label" for="lgFormGroupInput" id="titelLabel">Vehicle</label>
                                <select class="form-control" name="vehicle_id" required="1">
                                    <option value="">Select Vehicle</option>
                                    <t t-as="vehicle" t-foreach="vehicle_ids">
                                        <option t-att-value="vehicle.id">
                                            <t t-esc="vehicle.model_id.brand_id.name"/>-
                                            <t t-esc="vehicle.model_id.name"/>
                                            /
                                            <t t-esc="vehicle.license_plate"/>
                                            /
                                            <t t-esc="vehicle.color"/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="comment">Note</label>
                                <textarea class="form-control" id="comment" name="note" rows="5"/>
                            </div>
                            <div class="col-xl-6    ">
                                <a class="btn btn-primary" href="/contract/" name="back" style="margin-top: 5%;" value="back">Back</a>
                                <input class="btn btn-primary" name="submit" string="Next" style="margin-top: 5%;" type="submit" value="next"/>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="form-group">
                                <label for="exampleInputEmail1">Start Date</label>
                                <input class="form-control" name="start_date" required="1" type="date"/>
                            </div>
                            <div class="form-group">
                                <label for="exampleInputEmail1">End Date</label>
                                <input class="form-control" name="end_date" required="1" type="date"/>
                            </div>
                            <div class="col-xl-6 mybutton">
                                <input class="btn btn-primary" name="submit" string="Find Vehicle" style="margin-top: 5%;" type="submit" value="find_vehicle"/>
                            </div>
                        </t>
                    </div>
                </form>
            </div>
        </t>
    </template>
    <template id="payment">
        <t t-call="portal.frontend_layout">
            <div class="oe_structure"/>
            <div class="oe_structure">
                <div class="container">
                    <t t-call="fleet_tracking.fleet_portal_menu"/>
                    <div class="col-lg-8 form_cente">
                        <div class="form-group">
                            <label for="exampleInputEmail1">contract Id</label>
                            <input class="form-control" name="contract_id" readonly="1" t-att-value="contract_record.id" type="text"/>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Vehicle License Plate Number</label>
                            <input class="form-control" name="vehicle" readonly="1" t-att-value="contract_record.vehicle_ids.license_plate" type="text"/>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Start Date</label>
                            <input class="form-control" name="start_date" readonly="1" t-att-value="contract_record.start_date" type="text"/>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">End Date</label>
                            <input class="form-control" name="end_date" readonly="1" t-att-value="contract_record.end_date" type="text"/>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Amount</label>
                            <input class="form-control" name="amount" readonly="1" t-att-value="100" type="text"/>
                        </div>
                        <div class="col-xl-6">
                            <input class="btn btn-primary" id="pay_now" name="submit" string="Make Payment" style="margin-top: 5%;" type="submit" value="make_payment"/>
                        </div>
                        <script src="/fleet_tracking/static/src/js/make_payment.js" type="text/javascript"/>
                    </div>
                </div>
            </div>
        </t>
    </template>
    <template id="map_maker">
        <t t-call="portal.frontend_layout">
            <div class="oe_structure"/>
            <div class="oe_structure">
                <div class="container">
                    <t t-call="fleet_tracking.fleet_portal_menu"/>
                    <div id="map"/>
                    <script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js" type="text/javascript"/>
                    <script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"/>
                    <link href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" rel="stylesheet"/>
                    <script src="/fleet_tracking/static/src/js/map_maker.js" type="text/javascript"/>
                </div>
            </div>
        </t>
    </template>
    <template id="trip_address">
        <t t-call="portal.frontend_layout">
            <div class="oe_structure"/>
            <div class="oe_structure">
                <div class="container">
                    <t t-call="fleet_tracking.fleet_portal_menu"/>
                    <div id="mapid"/>
                    <script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"/>
                    <link crossorigin="" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" rel="stylesheet"/>
                    <link href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" rel="stylesheet"/>
                    <script crossorigin="" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"/>
                    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"/>
                    <!-- Load Esri Leaflet from CDN -->
                    <script crossorigin="" integrity="sha512-cMQ5e58BDuu1pr9BQ/eGRn6HaR6Olh0ofcHFWe5XesdCITVuSBiBZZbhCijBe5ya238f/zMMRYIMIIg1jxv4sQ==" src="https://unpkg.com/esri-leaflet@2.3.3/dist/esri-leaflet.js"/>
                    <!-- Load Esri Leaflet Geocoder from CDN -->
                    <link crossorigin="" href="https://unpkg.com/esri-leaflet-geocoder@2.3.2/dist/esri-leaflet-geocoder.css" integrity="sha512-IM3Hs+feyi40yZhDH6kV8vQMg4Fh20s9OzInIIAc4nx7aMYMfo+IenRUekoYsHZqGkREUgx0VvlEsgm7nCDW9g==" rel="stylesheet"/>
                    <script crossorigin="" integrity="sha512-8twnXcrOGP3WfMvjB0jS5pNigFuIWj4ALwWEgxhZ+mxvjF5/FBPVd5uAxqT8dd2kUmTVK9+yQJ4CmTmSg/sXAQ==" src="https://unpkg.com/esri-leaflet-geocoder@2.3.2/dist/esri-leaflet-geocoder.js"/>
                    <script src="/fleet_tracking/static/src/js/trip_address.js" type="text/javascript"/>
                </div>
            </div>
        </t>
    </template>
    <template id="payment_process">
        <title>Payment Confirm Portal</title>
        <t t-call="portal.frontend_layout">
        <t t-call="fleet_tracking.fleet_portal_menu"/>
            <div class="jumbotron text-center">
                <h1>Your Payment is Successfully Done!</h1>
                <p class="lead">
                    <strong class="strong">Please check your email</strong>
                </p>
                <p>Having trouble? 
                    <a href="#">Contact us</a>
                </p>
                <p class="lead">
                    <a class="btn btn-primary btn-sm" href="/contract/" role="button">Continue to homepage</a>
                </p>
            </div>
        </t>
    </template>
    <template id="cart" name="Shopping Cart">
        <t t-call="portal.frontend_layout">
        <t t-call="fleet_tracking.fleet_portal_menu"/>
            <main>
                <div class="basket">
                    <div class="basket-labels">
                        <ul class="ul">
                            <li class="li item item-heading">Item</li>
                            <li class="li price">Price</li>
                            <li class="li quantity">Quantity</li>
                            <li class="li subtotal">Subtotal</li>
                        </ul>
                    </div>
                    <t t-foreach="sale_order_lines" t-as="sale_order_line">
                        <!-- <t t-esc="sale_order_line"/> -->
                    <!-- </t> -->
                    <div class="basket-product">
                        <div class="item">
                            <div class="product-image">
                                <img alt="Placholder Image 2" class="product-frame" t-attf-src="data:image/png;base64, {{sale_order_line.product_id.image_1920}}"/>
                            </div>
                            <div class="product-details">
                                <h1 class="h1">
                                    <strong>
                                        <t t-esc="sale_order_line.name"/></strong></h1>
                                <p>
                                    <strong><t t-if="sale_order_line.product_id.type == 'consu'" >consumable</t><t t-else=""> <t t-esc="sale_order_line.product_id.type"/></t></strong>
                                </p>
                                <!-- <p>232321939</p> -->
                            </div>
                        </div>
                        <div class="price"><t t-esc="sale_order_line.price_unit"/></div>
                        <div class="quantity">
                            <input class="quantity-field input-button" name="quantity" min="1" type="number" value="1"/>
                        </div>
                        <div class="subtotal"><t t-esc="sale_order_line.price_unit"/></div>
                        <div class="remove">
                            <button class="input-button">Remove</button>
                        </div>
                    </div>
                </t>
                </div>
                <aside>
                    <div class="summary">
                        <div class="summary-total-items">
                            <span class="total-items"/>Items in your Bag</div>
                        <div class="summary-subtotal">
                            <div class="subtotal-title">Subtotal</div>
                            <div class="subtotal-value final-value" id="basket-subtotal">
                                <t t-if="order_id"><t t-esc="order_id.amount_total"/></t><t t-else="">0</t>
                            </div>
                        </div>
                        <div class="summary-total">
                            <div class="total-title">Total</div>
                            <div class="total-value final-value" id="basket-total">
                                <t t-if="order_id">
                                    <t t-esc="order_id.amount_total"/>
                                    <input type="hidden" name="contract_id" t-att-value="order_id.id"/>                                        
                                    <input type="hidden" name="amount" t-att-value="order_id.amount_total"/>                                        
                                </t>
                                <t t-else="">0</t>
                            </div>
                        </div>
                        <div class="summary-checkout">
                            <button class="checkout-cta input-button" id="pay_now">Checkout</button>
                            <script src="/fleet_tracking/static/src/js/make_payment.js" type="text/javascript"/>
                        </div>                       
                    </div>
                </aside>
            </main>
        </t>
    </template>
    <template id="product_list">
        <t t-call="portal.frontend_layout">
        <t t-call="fleet_tracking.fleet_portal_menu"/>
            <div class="container">
                <div id="main">
                    <section id="content">
                        <div id="left">
                            <ul>
                                <t t-as="product" t-foreach="products">

                                    <li>
                                        <div class="img">
                                            <a href="#">
                                                <img t-attf-src="data:image/png;base64, {{product.image_1920}}"/>
                                            </a>
                                        </div>
                                        <div class="info">
                                            <a class="title" href="#">
                                                <t t-esc="product.name"/>
                                            </a>
                                            <p>
                                                <b>Type : </b>
                                                <t t-if="product.type == 'consu'">Consumable</t>
                                                <t t-else="">
                                                    <t t-esc="product.type"/>
                                                </t>
                                            </p>
                                            <div class="price1">
                                                <span class="st">price:</span>
                                                <strong>
                                                    <t t-esc="product.list_price"/>
                                                </strong>
                                            </div>
                                            <div class="actions">
                                                <form action="/shop/cart/update" method="POST" t-if="product._is_add_to_cart_possible()">
                                                    <a role="button" href="#" onclick="this.parentNode.submit();">Add to cart</a>
                                                    <a role="button" href="#">Inqury</a>
                                                    <input name="csrf_token" t-att-value="request.csrf_token()" type="hidden"/>
                                                    <input class="product_template_id" name="product_template_id" t-att-value="product.id" type="hidden"/>
                                                </form>
                                            </div>
                                        </div>
                                    </li>
                                </t>
                            </ul>
                        </div>
                    </section>
                </div>
            </div>
        </t>
    </template>
</odoo>